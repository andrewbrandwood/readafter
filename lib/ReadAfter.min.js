!function($){ReadAfter=function(el,settings){var obj=this,$el=$(el);$.extend(obj,{articleContainer:"read-after",dataLnk:"read-after-link",dataTxt:"read-after-text",linkList:[],afterList:"read-after-list",btnClass:"read-after-link",clickedMsg:"<span>&#x2713;</span>",init:function(){var linkRef=settings.links;this.articleLinks=$el.find(linkRef),this.articleLinks.each($.proxy(this,"buildLinkOption"))},buildLinkOption:function(idx,e){var $lnk=$(e),$saveLink=$("<span data-"+this.dataTxt+'="'+$lnk.text()+'" data-'+this.dataLnk+'="'+$lnk.attr("href")+'" class="'+this.btnClass+'">('+settings.readAfterText+")<em></em></span>");$saveLink.insertAfter($lnk),$saveLink.on("click",$.proxy(this,"delegateClick"))},delegateClick:function(e){var $lnk=$(e.currentTarget),url=$lnk.data(this.dataLnk),txt=$lnk.data(this.dataTxt),hash=!1;"#"===url.charAt(0)&&(hash=!0);var readLnk=this.createLink(url,txt,hash);this.addLinkList(readLnk),this.removeLink($lnk)},removeLink:function($lnk){$lnk.off("click").addClass(settings.disabledClass).append(this.clickedMsg)},createLink:function(url,txt,hash){var newWin="";return settings.newWindow&&!hash&&(newWin='target="_blank" '),'<a href="'+url+'" '+newWin+">"+txt+"</a>"},addLinkList:function(lnk){$el.find("."+this.afterList).length<1?(this.onBeforeBuildList(),this.buildLinkList(lnk)):(this.$list.find("div").append(", "+lnk),this.onAfterLink())},buildLinkList:function(lnk){this.$list=$("<div />",{"class":this.afterList,html:settings.afterListTitle+"<div>"+lnk+"</div>"}),this.onAfterLink(),$el.append(this.$list),this.$list.hide().fadeIn(settings.fadeSpeed,$.proxy(this,"onAfterBuildList"))},onBeforeBuildList:function(){"function"==typeof settings.onBeforeBuildList&&settings.onBeforeBuildList.call(this)},onAfterBuildList:function(){"function"==typeof settings.onAfterBuildList&&settings.onAfterBuildList.call(this)},onAfterLink:function(){"function"==typeof settings.onAfterLink&&settings.onAfterLink.call(this)}}),obj.init()},$.fn.readafter=function(options){return this.each(function(){var $this=$(this),settings={afterListTitle:"",readAfterText:"read after",disabledClass:"disabled",links:"a",newWindow:!0,fadeSpeed:500,onBeforeBuildList:function(){},onAfterBuildList:function(){},onAfterLink:function(){}};options&&$.extend(settings,options),new ReadAfter($this,settings)})}}(jQuery);